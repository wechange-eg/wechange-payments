{% extends "wechange_payments/base.html" %}
{% load l10n i18n cosinnus_tags static widget_tweaks %}

{% block extrahead %}
	{{ block.super }}
	
	{% include 'wechange_payments/partials/slider_dependencies.html' with slider_initial_amount=subscription.amount %}
{% endblock %}

{% block page_title %}{% trans "(MS1) Your Contribution" %}{% endblock %}

{% block leftnav %}
	{% include 'wechange_payments/leftnav.html' %}
{% endblock leftnav %}

{% block breadcrumb %}
	{{ block.super }}
	<li><a class="active" href="{% url 'wechange-payments:my-subscription' %}">{% trans "(MS1) Your Contribution" %}</a></li>
{% endblock %}

{% block content %}
    
    {% comment %} The 'onkeydown' attribute prevents form sending on enter {% endcomment %}
    <form method="POST" action="{% url "wechange-payments:api-subscription-change-amount" %}" 
    		class="payments-form cosinnus-form form-horizontal large-space" onkeydown="return event.key != 'Enter';">{% csrf_token %}
        
        <!-- a box with semi transparent background -->
        <div class="v2-content">
	        <div class="error-frame alert alert-danger alert-dismissable" style="display: none;">
	            <i class="fa fa-exclamation-triangle fa-3x"></i>
		        <p class="error-message"></p>
		    </div>
		    
		    {% comment %} TODO: add conditional check and different text for upcoming payments with a cancelled active one! {% endcomment %}
		    
		    <h2>{% blocktrans with amount=subscription.amount|intify %}(MS2) Your current Contribution is {{ amount }} Euro per month{% endblocktrans %}</h2>
			<p>
				{% trans "(MS3) Text for 'wir verstehen die WECHANGE-plattform als gemeingut... etc'" %}
			</p>
			<p>
				<a href="{% include 'wechange_payments/partials/url_learn_more.html' %}">{% trans "(MS4) Learn more" %}</a>
			</p>

			<hr/>
			
			<h3>{% trans "(MS7) Change your monthly Contribution" %}:</h3>
			
        	<div class="large-space">
				<span>
					{% trans "(MS8) If you would like to change the amount you contribute, you can choose a new amount using the slider. You may also choose a higher amount by entering it manually." %}
					{% trans "(PF24) Contribution amount includes 19% VAT" %}
				</span>
			</div>
			
			{% include 'wechange_payments/fields/slider.html' with field_name='amount' %}
        	
			
			<div class="button-section clearfix">
				{% comment %} Add this to the button to make it initially disabled until the amount is changed:
	                class="enabled-on-change disabled" disabled="disabled">
				{% endcomment %}
                <button type="submit" class="pull-right rounded-button button-color-primary-inverted"> 
			        <span class="rounded-button-inner">
						{% trans "(MS5) Modify Contribution Amount" context "payment step button" %}
			        </span>
			    </button>
			    	
				    <a href="{% url "wechange-payments:cancel-subscription" %}" class="pull-left rounded-button button-color-tertiary">
				        <span class="rounded-button-inner">
	                		{% trans "(MS6) Cancel your Contribution" %}
				        </span>
				    </a>
			    {% comment %}  
		    	No changing payment infos here for now
			    <a href="{% url "wechange-payments:payment-update" %}" class="pull-left rounded-button button-color-secondary">
			        <span class="rounded-button-inner">
						{% trans "(TS9) Change payment information" %}
			        </span>
			    </a>
			    {% endcomment %}
			</div>
		    
		</div>
	</form>
        
    
{% endblock %}

